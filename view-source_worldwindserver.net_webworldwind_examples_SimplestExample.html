<!DOCTYPE html>
<!-- This is a very simple example of using Web World Wind. -->
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>World Wind Example</title>
    <!-- Include the Web World Wind library. -->
    <script src="http://worldwindserver.net/webworldwind/worldwindlib.js" type="text/javascript"></script>
</head>
<body>
<div style="position: absolute; top: 50px; left: 30px;">
    <!-- Create a canvas for Web World Wind. -->
    <canvas id="canvasOne" width="900" height="900">
        Your browser does not support HTML5 Canvas.
    </canvas>
</div>
<script>
    // Register an event listener to be called when the page is loaded.
    window.addEventListener("load", eventWindowLoaded, false);

    // Define the event listener to initialize Web World Wind.
    function eventWindowLoaded() {
        // Create a World Window for the canvas.
        var wwd = new WorldWind.WorldWindow("canvasOne");
		wwd.verticalExaggeration = 3;

        // Add some image layers to the World Window's globe.
        wwd.addLayer(new WorldWind.BMNGOneImageLayer());
        wwd.addLayer(new WorldWind.BingAerialWithLabelsLayer());

        // Add a compass, a coordinates display and some view controls to the World Window.
        wwd.addLayer(new WorldWind.CompassLayer());
        wwd.addLayer(new WorldWind.CoordinatesDisplayLayer(wwd));
        wwd.addLayer(new WorldWind.ViewControlsLayer(wwd));
		
		//Add a placemark at Amherst
		placemarkAttributes = new WorldWind.PlacemarkAttributes();
		placemarkAttributes.imageScale = 100;
		placemarkAttributes.imageColor = new WorldWind.Color(1, 0, 0, 0.5);
		amherst = new WorldWind.Position(42.37, -72.52, 0);
		var placemark = new WorldWind.Placemark(
			amherst,
			true,
			placemarkAttributes
		);
		var placemarkLayer = new WorldWind.RenderableLayer("Placemarks");
		placemarkLayer.addRenderable(placemark);
		wwd.addLayer(placemarkLayer);
		
		//Download geoJSON
		try {
			var data = new WorldWind.GeoJSONParser("states.json"); //sets the Parser
		} catch(error) {
			window.alert('There is an arror! ;' + error.message)
		}
		data.load(); //load the file
		/*
		'displayName, enabled, pickEnabled, opacity, minActiveAltitude, maxActiveAltitude, inCurrentFrame, time, renderables)'.split(',').forEach(function(property)
		/*Pwindow.alert('property' + ' = '+ data.layer[property]);
		}];*/
		data.layer.displayName = 'US States';
		wwd.addLayer(data.layer);
		wwd.goTo(amherst, function(){
			window.alert(wwd.layers.inCurrentFrame);})
	}
</script>
</body>
</html>